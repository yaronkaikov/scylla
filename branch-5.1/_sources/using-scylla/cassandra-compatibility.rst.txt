
Scylla and Apache Cassandra Compatibility 
=========================================

Latest update: Scylla 4.0

Scylla is a drop-in replacement for Apache Cassandra 3.11, supporting both the data format (SSTable) and all relevant external interfaces, with many features from more advanced Apache Cassandra releases.
The following page detailed the level of support for each interface. For more on Cassandra features which are not available yet `see here <http://www.scylladb.com/technology/status/#road-map>`_

.. note::

   This table includes Apache Cassandra features and the corresponding Scylla Open Source status. It does **not** include Scylla Enterprise features or Scylla Open Source features with no match in Apache Cassandra.
   More on :doc:`Scylla Features </using-scylla/features>`

For all tables below, the following convention is used:

* |x| - Not Available in Scylla
* NC - Available in Scylla, but not compatible with Apache Cassandra
* |v| - Available and compatible with Apache Cassandra

Interfaces
----------

==============================  =============================================  =============
Apache Cassandra                Version                                        Comments
==============================  =============================================  =============
CQL                             CQL spec 3.4.0, Native protocol v4 (C* 3.11)   More below
------------------------------  ---------------------------------------------  -------------
Thrift                          Compatible with Cassandra 2.1
------------------------------  ---------------------------------------------  -------------
SSTable format (all versions)   3.11(mc / md ), 2.2(la), 2.1.8 (ka)            md format is supported in Scylla 4.3, 2021.1.0 and later
------------------------------  ---------------------------------------------  -------------
JMX                             3.11                                           More Below
------------------------------  ---------------------------------------------  -------------
Configuration (cassandra.yaml)	3.11
------------------------------  ---------------------------------------------  -------------
Log                             NC
------------------------------  ---------------------------------------------  -------------
Gossip and internal streaming	NC
------------------------------  ---------------------------------------------  -------------
SSL                             NC
==============================  =============================================  =============

..  _3.3.1: https://github.com/apache/cassandra/blob/cassandra-2.2/doc/cql3/CQL.textile#changes

Supported Tools
---------------
(based on Apache Cassandra 3.11 release)


.. include:: /operating-scylla/_common/tools_index.rst

Features
--------

.. _consistency-level-read-and-write:

Consistency Level (read and write)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

+-------------------------------------+--------------+
|   Options                           | Support      |
+=====================================+==============+
| Any (Write Only)                    | |v|          |
+-------------------------------------+--------------+
| One                                 | |v|          |
+-------------------------------------+--------------+
| Two                                 | |v|          |
+-------------------------------------+--------------+
| Three                               | |v|          |
+-------------------------------------+--------------+
| Quorum                              | |v|          |
+-------------------------------------+--------------+
| All                                 | |v|          |
+-------------------------------------+--------------+
| Local One                           | |v|          |
+-------------------------------------+--------------+
| Local Quorum                        | |v|          |
+-------------------------------------+--------------+
| Each Quorum (Write Only)            | |v|          |
+-------------------------------------+--------------+
| SERIAL                              | |v| :sup:`*` |
+-------------------------------------+--------------+
| LOCAL_SERIAL                        | |v|:sup:`*`  |
+-------------------------------------+--------------+

:sup:`*` From Scylla 4.0. See `Scylla LWT`_


Snitches
^^^^^^^^
+-------------------------------------+--------+
|   Options                           | Support|
+=====================================+========+
| SimpleSnitch_                       |   |v|  |
+-------------------------------------+--------+
| RackInferringSnitch_                |   |v|  |
+-------------------------------------+--------+
| PropertyFileSnitch                  |   |x|  |
+-------------------------------------+--------+
| GossipingPropertyFileSnitch_        |   |v|  |
+-------------------------------------+--------+
| Dynamic snitching                   |   |x|  |
+-------------------------------------+--------+
| EC2Snitch_                          |   |v|  |
+-------------------------------------+--------+
| EC2MultiRegionSnitch_               |   |v|  |
+-------------------------------------+--------+
| GoogleCloudSnitch_                  |   |v|  |
+-------------------------------------+--------+
| CloudstackSnitch                    |   |x|  |
+-------------------------------------+--------+

Partitioners
^^^^^^^^^^^^
+-------------------------------------+--------------+
|   Options                           | Support      |
+=====================================+==============+
| Murmur3Partitioner (default)        |   |v|        |
+-------------------------------------+--------------+
| RandomPartitioner                   | |x| :sup:`*` |
+-------------------------------------+--------------+
| OrderPreservingPartitioner          | |x|          |
+-------------------------------------+--------------+
| ByteOrderedPartitioner              | |x| :sup:`*` |
+-------------------------------------+--------------+
| CollatingOrderPreservingPartitioner |    |x|       |
+-------------------------------------+--------------+

:sup:`*` Removed in Scylla 4.0

Protocol Options
^^^^^^^^^^^^^^^^
+-------------------------------------+--------------+
|   Options                           | Support      |
+=====================================+==============+
| Encryption_                         |   |v|        |
+-------------------------------------+--------------+
| Authentication_                     |   |v|        |
+-------------------------------------+--------------+
| Compression_  (see below)           |   |v|        |
+-------------------------------------+--------------+


Compression
^^^^^^^^^^^
+-------------------------------------+--------------+
|   Options                           | Support      |
+=====================================+==============+
|CQL Compression                      |   |v|        |
+-------------------------------------+--------------+
| LZ4                                 |   |v|        |
+-------------------------------------+--------------+
| Snappy                              |   |v|        |
+-------------------------------------+--------------+
| `Node to Node Compression`_         |   |v|        |
+-------------------------------------+--------------+
| `Client to Node Compression`_       |   |v|        |
+-------------------------------------+--------------+

Backup and Restore
^^^^^^^^^^^^^^^^^^
+-------------------------------------+--------------+
|   Options                           | Support      |
+=====================================+==============+
| Snapshot_                           |   |v|        |
+-------------------------------------+--------------+
| `Incremental backup`_               |   |v|        |
+-------------------------------------+--------------+
| Restore_                            |   |v|        |
+-------------------------------------+--------------+

Repair and Consistency
^^^^^^^^^^^^^^^^^^^^^^
+-------------------------------------+--------------+
|   Options                           | Support      |
+=====================================+==============+
| `Nodetool Repair`_                  |   |v|        |
+-------------------------------------+--------------+
| Incremental Repair                  | |x|          |
+-------------------------------------+--------------+
|`Hinted Handoff`_                    | |v|          |
+-------------------------------------+--------------+
|`Lightweight transactions`_          |  |v|:sup:`*` |
+-------------------------------------+--------------+


:sup:`*` From Scylla 4.0. See `Scylla LWT`_

Replica Replacement Strategy
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

+-------------------------------------+--------------+
|   Options                           | Support      |
+=====================================+==============+
| SimpleStrategy                      |   |v|        |
+-------------------------------------+--------------+
| NetworkTopologyStrategy             |   |v|        |
+-------------------------------------+--------------+



Security
^^^^^^^^

+-------------------------------------+--------------+
|   Options                           | Support      |
+=====================================+==============+
| Role Based Access Control (RBAC)    |   |v|        |
+-------------------------------------+--------------+


Indexing and Caching
^^^^^^^^^^^^^^^^^^^^^

+-------------------------------------+-----------------------------------------+
|   Options                           | Support                                 |
+=====================================+=========================================+
|row / key cache                      | |x| (More on `Scylla memory and cache`_)|
+-------------------------------------+-----------------------------------------+
|`Secondary Index`_                   | |v| :sup:`*`                            |
+-------------------------------------+-----------------------------------------+
|`Materialized Views`_                |  |v|:sup:`*`                            |
+-------------------------------------+-----------------------------------------+

:sup:`*` In Scylla Open Source and Scylla Enterprise from 2019.1

Additional Features
^^^^^^^^^^^^^^^^^^^

+-----------------------------------+-------------------------------------+
| Feature                           | Support                             |
+===================================+=====================================+
|Counters                           | |v|                                 |
+-----------------------------------+-------------------------------------+
|User Defined Types                 | |v|                                 |
+-----------------------------------+-------------------------------------+
|User Defined Functions             | |x| :sup:`*`                        |
+-----------------------------------+-------------------------------------+
|Time to live (TTL)                 | |v|                                 |
+-----------------------------------+-------------------------------------+
|Super Column                       | |x|                                 |
+-----------------------------------+-------------------------------------+
|vNode Enable                       | |v| Default                         |
+-----------------------------------+-------------------------------------+
|vNode Disable                      | |x|                                 |
+-----------------------------------+-------------------------------------+
|Triggers                           | |x|                                 |
+-----------------------------------+-------------------------------------+
|Batch Requests                     | |v| Includes conditional updates    |
+-----------------------------------+-------------------------------------+

:sup:`*`  Experimental 

.. _`Secondary Index`: /using-scylla/secondary-indexes/
.. _`Lightweight Transactions`: /using-scylla/lwt/
.. _`Materialized Views`: /using-scylla/materialized-views/
.. _`Node to Node Compression`: /operating-scylla/admin/#internode-compression
.. _`Client to Node Compression`: /operating-scylla/admin/#client-node-compression
.. _`Compression`: /operating-scylla/admin/#compression
.. _`Scylla LWT`: /using-scylla/lwt/
.. _401: https://github.com/scylladb/scylla/issues/401
.. _1141: https://github.com/scylladb/scylla/issues/1141
.. _1619: https://github.com/scylladb/scylla/issues/1619
.. _577: https://github.com/scylladb/scylla/issues/577
.. _`Scylla memory and cache`: http://www.scylladb.com/technology/memory/
.. _Encryption: /operating-scylla/security/client_node_encryption/
.. _Authentication: /operating-scylla/security/authentication/
.. _Authorization: /operating-scylla/security/authorization/
.. _`Nodetool Repair`: /operating-scylla/nodetool-commands/repair/
.. _Snapshot: /operating-scylla/procedures/backup-restore/backup/#full-backup-snapshots
.. _`Incremental backup`: /operating-scylla/procedures/backup-restore/backup/#incremental-backup
.. _Restore: /operating-scylla/procedures/backup-restore/restore/
.. _SimpleSnitch: /operating-scylla/system-configuration/snitch/#simplesnitch
.. _RackInferringSnitch: /operating-scylla/system-configuration/snitch/#rackinferringsnitch
.. _GossipingPropertyFileSnitch: /operating-scylla/system-configuration/snitch/#gossipingpropertyfilesnitch/
.. _EC2Snitch: /operating-scylla/system-configuration/snitch/#ec2snitch/
.. _EC2MultiRegionSnitch: /operating-scylla/system-configuration/snitch/#ec2multiregionsnitch
.. _GoogleCloudSnitch: /operating-scylla/system-configuration/snitch/#googlecloudsnitch
.. _`Hinted Handoff`: /architecture/anti-entropy/hinted-handoff/

CQL Command Compatibility
-------------------------

Create Keyspace
^^^^^^^^^^^^^^^
+-----------------------------------+-------------------------------------+
| Feature                           | Support                             |
+===================================+=====================================+
|DURABLE_WRITES                     | |v|                                 |
+-----------------------------------+-------------------------------------+
|IF NOT EXISTS                      | |v|                                 |
+-----------------------------------+-------------------------------------+
|WITH REPLICATION                   | |v|    (see below)                  |
+-----------------------------------+-------------------------------------+

Create Keyspace with Replication
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

+-----------------------------------+-------------------------------------+
| Feature                           | Support                             |
+===================================+=====================================+
|SimpleStrategy                     | |v|                                 |
+-----------------------------------+-------------------------------------+
|NetworkTopologyStrategy            | |v|                                 |
+-----------------------------------+-------------------------------------+
|OldNetworkTopologyStrategy         | |x|                                 |
+-----------------------------------+-------------------------------------+

Create Table
^^^^^^^^^^^^
+-----------------------------------+-------------------------------------+
| Feature                           | Support                             |
+===================================+=====================================+
| Primary key column                | |v|                                 |
+-----------------------------------+-------------------------------------+
| Compound primary key              | |v|                                 |
+-----------------------------------+-------------------------------------+
| Composite partition key           | |v|                                 |
+-----------------------------------+-------------------------------------+
| Clustering order                  | |v|                                 |
+-----------------------------------+-------------------------------------+
| Static column                     | |v|                                 |
+-----------------------------------+-------------------------------------+



Create Table Att
................

+-----------------------------------+-------------------------------------+
| Feature                           | Support                             |
+===================================+=====================================+
|bloom_filter_fp_chance             | |v|                                 |
+-----------------------------------+-------------------------------------+
|caching                            | |x| (ignored)                       |
+-----------------------------------+-------------------------------------+
|comment                            | |v|                                 |
+-----------------------------------+-------------------------------------+
|compaction                         | |v|                                 |
+-----------------------------------+-------------------------------------+
|compression                        | |v|                                 |
+-----------------------------------+-------------------------------------+
|dclocal_read_repair_chance         ||v|                                  |
+-----------------------------------+-------------------------------------+
|default_time_to_live               ||v|                                  |
+-----------------------------------+-------------------------------------+
| gc_grace_seconds                  ||v|                                  |
+-----------------------------------+-------------------------------------+
| index_interval                    | |x|                                 |
+-----------------------------------+-------------------------------------+
| max_index_interval                ||v|                                  |
+-----------------------------------+-------------------------------------+
| memtable_flush_period_in_ms       | |x| (ignored)                       |
+-----------------------------------+-------------------------------------+
| min_index_interval                ||v|                                  |
+-----------------------------------+-------------------------------------+
|populate_io_cache_on_flush         | |x|                                 |
+-----------------------------------+-------------------------------------+
|read_repair_chance                 ||v|                                  |
+-----------------------------------+-------------------------------------+
|replicate_on_write                 | |x|                                 |
+-----------------------------------+-------------------------------------+
|speculative_retry                  | ``ALWAYS``, ``NONE``                |
+-----------------------------------+-------------------------------------+

Create Table Compaction
.......................

+----------------------------------------+-------------------------------------+
| Feature                                | Support                             |
+========================================+=====================================+
| SizeTieredCompactionStrategy_ (STCS)   | |v|                                 |
+----------------------------------------+-------------------------------------+
|LeveledCompactionStrategy_ (LCS)        | |v|                                 |
+----------------------------------------+-------------------------------------+
|DateTieredCompactionStrategy (DTCS)     | |v|  :sup:`*`                       |
+----------------------------------------+-------------------------------------+
|TimeWindowCompactionStrategy_ (TWCS)    | |v|                                 |
+----------------------------------------+-------------------------------------+

:sup:`*`  Deprecated in Scylla 4.0, use TWCS instead

Create Table Compression
........................

+----------------------------------------+-------------------------------------+
| Feature                                | Support                             |
+========================================+=====================================+
|sstable_compression LZ4Compressor       | |v|                                 |
+----------------------------------------+-------------------------------------+
|sstable_compression SnappyCompressor    | |v|                                 |
+----------------------------------------+-------------------------------------+
|sstable_compression DeflateCompressor   | |v|                                 |
+----------------------------------------+-------------------------------------+
|chunk_length_kb                         | |v|                                 |
+----------------------------------------+-------------------------------------+
|crc_check_chance                        | |x|                                 |
+----------------------------------------+-------------------------------------+

Alter Commands
..............

+----------------------------------------+-------------------------------------+
| Feature                                | Support                             |
+========================================+=====================================+
|ALTER KEYSPACE                          | |v|                                 |
+----------------------------------------+-------------------------------------+
|ALTER TABLE                             | |v|                                 |
+----------------------------------------+-------------------------------------+
|ALTER TYPE                              | |v|                                 |
+----------------------------------------+-------------------------------------+
|ALTER USER                              | |v|                                 |
+----------------------------------------+-------------------------------------+
|ALTER ROLE                              | |v|                                 |
+----------------------------------------+-------------------------------------+

Data Manipulation
.................

+----------------------------------------+-------------------------------------+
| Feature                                | Support                             |
+========================================+=====================================+
|BATCH                                   | |v|                                 |
+----------------------------------------+-------------------------------------+
|INSERT                                  | |v|                                 |
+----------------------------------------+-------------------------------------+
|Prepared Statements                     | |v|                                 |
+----------------------------------------+-------------------------------------+
|SELECT                                  | |v|                                 |
+----------------------------------------+-------------------------------------+
|TRUNCATE                                | |v|                                 |
+----------------------------------------+-------------------------------------+
|UPDATE                                  | |v|                                 |
+----------------------------------------+-------------------------------------+
|USE                                     | |v|                                 |
+----------------------------------------+-------------------------------------+

Create Commands
...............

+----------------------------------------+-------------------------------------+
| Feature                                | Support                             |
+========================================+=====================================+
|CREATE TRIGGER                          ||x|                                  |
+----------------------------------------+-------------------------------------+
|CREATE USER                             | |v|                                 |
+----------------------------------------+-------------------------------------+
|CREATE ROLE                             | |v|                                 |
+----------------------------------------+-------------------------------------+

Drop Commands
.............

+----------------------------------------+-------------------------------------+
| Feature                                | Support                             |
+========================================+=====================================+
|DROP KEYSPACE                           | |v|                                 |
+----------------------------------------+-------------------------------------+
|DROP TABLE                              | |v|                                 |
+----------------------------------------+-------------------------------------+
|DROP TRIGGER                            | |x|                                 |
+----------------------------------------+-------------------------------------+
|DROP TYPE                               | |v|                                 |
+----------------------------------------+-------------------------------------+
|DROP USER                               | |v|                                 |
+----------------------------------------+-------------------------------------+
|DROP ROLE                               | |v|                                 |
+----------------------------------------+-------------------------------------+

Roles and Permissions
.....................

+----------------------------------------+-------------------------------------+
| Feature                                | Support                             |
+========================================+=====================================+
|GRANT PERMISSIONS                       | |v|                                 |
+----------------------------------------+-------------------------------------+
|GRANT ROLE                              | |v|                                 |
+----------------------------------------+-------------------------------------+
|LIST PERMISSIONS                        | |v|                                 |
+----------------------------------------+-------------------------------------+
|LIST USERS                              | |v|                                 |
+----------------------------------------+-------------------------------------+
|LIST ROLES                              | |v|                                 |
+----------------------------------------+-------------------------------------+
|REVOKE PERMISSIONS                      | |v|                                 |
+----------------------------------------+-------------------------------------+
|REVOKE ROLE                             | |v|                                 |
+----------------------------------------+-------------------------------------+

Materialized Views
..................

+----------------------------------------+-------------------------------------+
| Feature                                | Support                             |
+========================================+=====================================+
| MATERIALIZED VIEW                      | |v|                                 |
+----------------------------------------+-------------------------------------+
| ALTER MATERIALIZED VIEW                | |v|                                 |
+----------------------------------------+-------------------------------------+
|CREATE MATERIALIZED VIEW                | |v|                                 |
+----------------------------------------+-------------------------------------+
|DROP MATERIALIZED VIEW                  | |v|                                 |
+----------------------------------------+-------------------------------------+

Index commands
..............

+----------------------------------------+-------------------------------------+
| Feature                                | Support                             |
+========================================+=====================================+
|INDEX                                   | |v|                                 |
+----------------------------------------+-------------------------------------+
|CREATE INDEX                            | |v|                                 |
+----------------------------------------+-------------------------------------+
|DROP INDEX                              | |v|                                 |
+----------------------------------------+-------------------------------------+


.. _SizeTieredCompactionStrategy: /getting-started/compaction/#size-tiered-compaction-strategy

.. _LeveledCompactionStrategy: /getting-started/compaction/#leveled-compaction-strategy

.. _TimeWindowCompactionStrategy: /getting-started/compaction/#time-window-compactionstrategy

.. _1432: https://github.com/scylladb/scylla/issues/1432

.. include:: /rst_include/apache-copyrights-index.rst

.. include:: /rst_include/apache-copyrights-index-all-attributes.rst
